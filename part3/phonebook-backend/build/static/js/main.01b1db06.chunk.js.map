{"version":3,"sources":["services/persons.js","App.js","index.js"],"names":["baseUrl","axios","get","then","response","data","newPerson","post","id","delete","status","newNum","url","put","SearchFilter","props","value","onChange","handle","PersonForm","onSubmit","handleSubmit","name","handleNameChange","number","handleNumberChange","onClick","Person","handleDelete","DisplayPersons","mappedFilteredPersons","persons","filter","person","toLowerCase","includes","filterText","map","Notification","message","className","App","useState","setPersons","newName","setNewName","newNumber","setNewNumber","newFilter","setNewFilter","newNotification","setNewNotification","useEffect","backendService","initialPersons","testButton","event","console","log","target","preventDefault","oldP","find","match","undefined","window","confirm","newP","upd","setTimeout","returnedPerson","concat","targetID","targetPerson","p","Number","catch","error","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.01b1db06.chunk.js","sourcesContent":["import axios from 'axios'\nconst baseUrl = '/api/persons'\n\nconst GetAll = () => {\n    const request = axios.get(baseUrl)\n    return request.then(response => response.data)\n}\n\nconst Create = newPerson => {\n    const request = axios.post(baseUrl, newPerson)\n    return request.then(response => response.data)\n}\n\nconst DeleteP = id => {\n    const request = axios.delete(`${baseUrl}/${id}`)\n    return request.then(response => response.status)\n}\n\nconst ChangeNumber = newNum => {\n    //console.log(newNum)\n    const url = `http://localhost:3001/persons/${newNum.id}`\n    const request = axios.put(url, newNum)\n    return request.then(response => response.data)\n}\nexport default {\n    getAll: GetAll,\n    create: Create,\n    deleteP: DeleteP,\n    changeN: ChangeNumber\n}","import React, { useState, useEffect } from 'react'\nimport backendService from './services/persons'\n\nconst SearchFilter = (props) => {\n  return (\n    <div>\n      <form>\n        filter shown with <input value={props.value} onChange={props.handle} />\n      </form>\n    </div>\n  )\n}\n\nconst PersonForm = (props) => {\n  return (\n    <div>\n      <form onSubmit={props.handleSubmit}>\n        <div>\n          name: <input value={props.name} onChange={props.handleNameChange} />\n        </div>\n        <div>\n          number: <input value={props.number} onChange={props.handleNumberChange} />\n        </div>\n        <div>\n          <button onClick={props.handleSubmit}>add</button>\n        </div>\n      </form>\n    </div>\n  )\n}\n\nconst Person = (props) => {\n  return (\n    <div><p>{props.name} : {props.number} <button id={props.id} onClick={props.handleDelete}>delete</button></p></div>\n  )\n}\nconst DisplayPersons = (props) => {\n  const filteredPersons = props.persons.filter(person => person.name.toLowerCase().includes(props.filterText.toLowerCase()))\n  const mappedFilteredPersons = filteredPersons.map(person => <Person name={person.name} number={person.number} key={person.name} id={person.id} handleDelete={props.handle}/>)\n  return (\n    <div>\n      {mappedFilteredPersons}\n    </div>\n  )\n}\n\nconst Notification = ({ message }) => {\n  if (message === null) {\n    return null\n  }\n  return (\n    <div className='error'>\n      {message}\n    </div>\n  )\n}\n\nconst App = () => {\n  const [persons, setPersons] = useState([])\n  const [newName, setNewName] = useState('')\n  const [newNumber, setNewNumber] = useState('')\n  const [newFilter, setNewFilter] = useState('')\n  const [newNotification, setNewNotification] = useState(null)\n\n  useEffect(() => { backendService.getAll().then(initialPersons => { setPersons(initialPersons) }) },\n    [])\n\n  const addPerson = (event) => {\n    event.preventDefault()\n    const oldP = persons.find(match => match.name.toLowerCase() === newName.toLowerCase())\n    if (oldP !== undefined) {\n      if (window.confirm(`${newName} is already in the phonebook, update the number?`)) {\n        const newP = { ...oldP, number: newNumber }\n        backendService.changeN(newP).then(response => backendService.getAll().then(upd => setPersons(upd)))\n        setNewNotification(`Number of '${newP.name}' changed to ${newP.number}`)\n        setTimeout(() => {\n          setNewNotification(null)\n        }, 5000)\n      }\n    }\n    else {\n      const personObject = {\n        name: newName,\n        number: newNumber\n      }\n      backendService.create(personObject).then(returnedPerson => {\n        setPersons(persons.concat(returnedPerson))\n        setNewName('')\n        setNewNumber('')\n        setNewNotification(`Added ${returnedPerson.name}`)\n        setTimeout(() => {\n          setNewNotification(null)\n        }, 5000)\n      })\n    }\n  }\n\n\n  const handleNameChange = (event) => {\n    //console.log(event.target.value)\n    setNewName(event.target.value)\n  }\n\n  const handleNumberChange = (event) => {\n    //console.log(event.target.value)\n    setNewNumber(event.target.value)\n  }\n\n  const handleFilterChange = (event) => {\n    //console.log(event.target.value)\n    setNewFilter(event.target.value)\n  }\n  const handleDeleteChange = (event) => {\n    const targetID = event.target.id\n    const targetPerson = persons.find(p => Number(p.id) === Number(targetID))\n    if (window.confirm(`Delete ${targetPerson.name} from the phonebook?`)) {\n      backendService.deleteP(targetID).then(response => {\n        if (response === 200) {\n          backendService.getAll().then(response => setPersons(response))\n        }\n      }).catch(error => {\n        backendService.getAll().then(response => setPersons(response))\n        setNewNotification(`${targetPerson.name} has already been removed from the phonebook`)\n      })\n      setTimeout(() => {\n        setNewNotification(null)\n      }, 5000)\n    }\n    //console.log('handleDeleteChange')\n  }\n\n  const handleTestClick = (event) => {\n    console.log(event.target.id)\n  }\n\n  const testButton = (\n    <div>\n      <button onClick={handleTestClick} id='2'>test</button>\n    </div>\n  )\n  \n  return (\n    <div>\n      <h1>Phonebook</h1>\n      {testButton}\n      <Notification message={newNotification} />\n      <SearchFilter value={newFilter} handle={handleFilterChange} />\n      <h2>add a new person</h2>\n      <PersonForm handleSubmit={addPerson} name={newName} number={newNumber} handleNameChange={handleNameChange} handleNumberChange={handleNumberChange} />\n      <h2>Numbers</h2>\n      <DisplayPersons persons={persons} filterText={newFilter} handle={handleDeleteChange} />\n    </div>\n  )\n}\n\nexport default App","import ReactDOM from 'react-dom'\nimport App from './App'\nimport './index.css'\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n)"],"sourceRoot":""}